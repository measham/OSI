const HomePage={_initialized:!1,_datesTimeline:null,_imageTrail:null,_toolbarModalInitialized:!1,_toolbarTimeline:null,init:function(e){this.cleanup(),setTimeout((()=>{this.initDatesAnimation()}),150),this.initCursorAnimation(),this.initToolbarModal(),this._initialized=!0},cleanup:function(){if(this._datesTimeline&&(this._datesTimeline.kill(),this._datesTimeline=null),gsap.killTweensOf(".dates-item"),gsap.killTweensOf(".dates-item_inner"),gsap.killTweensOf(".home-bg_dates-component"),this._toolbarTimeline&&(this._toolbarTimeline.kill(),this._toolbarTimeline=null),this._toolbarModalInitialized){const e=$("#pillLink"),t=$("#toolbarComponent");e.off("click"),t.off("click"),$(document).off("click.toolbarModal"),this._toolbarModalInitialized=!1}window.homeCursorAnimationCleanup&&window.homeCursorAnimationCleanup(),window.activeHomeImageTrail&&window.activeHomeImageTrail.cleanup&&window.activeHomeImageTrail.cleanup(),this._initialized=!1},initToolbarModal:function(){if(this._toolbarModalInitialized)return;const e=$("#pillLink"),t=$("#toolbarComponent"),i=$("#toolbarHome");if(!e.length||!t.length||!i.length)return;let o=!1,n=!1;e.on("click",(r=>{r.stopPropagation(),n||(o?(this.closeToolbarModal(e,t,i,(()=>{o=!1,n=!1})),n=!0):(this.openToolbarModal(e,t,i,(()=>{o=!0,n=!1})),n=!0))})),t.on("click",(e=>{e.stopPropagation()})),$(document).on("click.toolbarModal",(()=>{o&&!n&&(this.closeToolbarModal(e,t,i,(()=>{o=!1,n=!1})),n=!0)})),t.css({visibility:"hidden",opacity:0}),this._toolbarModalInitialized=!0},openToolbarModal:function(e,t,i,o){e.addClass("active");const n=e.outerWidth(),r=e.outerHeight();t.css({width:n,height:r,position:"absolute",left:"50%",bottom:"-2px",transform:"translateX(-50%)",opacity:1,visibility:"visible"}),gsap.set(i,{y:20,opacity:0,visibility:"visible"});const s=gsap.timeline({onComplete:o});s.to(e,{bottom:"16px",duration:.3,delay:.2,ease:"power2.out"}),s.to(t,{width:"540px",height:"510px",borderRadius:"10px",duration:.5,ease:"power2.out"},"<"),s.to(i,{y:0,opacity:1,filter:"blur(0px)",scale:1,duration:.4,ease:"power2.out"},"-=0.3"),this._toolbarTimeline=s},closeToolbarModal:function(e,t,i,o){e.removeClass("active");const n=gsap.timeline({onComplete:function(){o(),t.css({visibility:"hidden",opacity:0}),i.css("visibility","hidden")}});n.to(i,{y:20,opacity:0,filter:"blur(10px)",scale:.95,duration:.3,ease:"power2.in"});const r=e.outerWidth(),s=e.outerHeight();n.to(t,{width:r,height:s,borderRadius:"100px",duration:.5,ease:"power2.in"},"-=0.2"),n.to(e,{bottom:"0px",duration:.3,ease:"power2.in"},"-=0.3"),this._toolbarTimeline=n},initDatesAnimation:function(){gsap.killTweensOf(".dates-item"),gsap.killTweensOf(".dates-item_inner");const e=document.querySelector(".home-bg_dates-component"),t=document.querySelector(".dates-list-wrap"),i=document.querySelector(".dates-item-wrap"),o=document.querySelectorAll(".dates-item");if(!o.length)return;e&&(e.style.display="block",e.style.opacity="0"),t&&Object.assign(t.style,{position:"fixed",height:"100vh",width:"100vw",left:"40%",top:"50%",transform:"translate(-50%, -50%)",perspective:"2000px",transformStyle:"preserve-3d"}),i&&Object.assign(i.style,{position:"absolute",width:"100%",height:"100%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",transformStyle:"preserve-3d"});const n=[{top:"30%",left:"80%",xOffset:200,group:0,rotationY:5},{top:"25%",left:"20%",xOffset:-200,group:0,rotationY:-5},{top:"45%",left:"70%",xOffset:150,group:1,rotationY:0},{top:"55%",left:"30%",xOffset:-150,group:1,rotationY:0},{top:"35%",left:"50%",xOffset:0,group:2,rotationY:0},{top:"65%",left:"85%",xOffset:250,group:2,rotationY:5},{top:"40%",left:"15%",xOffset:-250,group:3,rotationY:-5},{top:"70%",left:"40%",xOffset:-100,group:3,rotationY:0},{top:"50%",left:"80%",xOffset:175,group:4,rotationY:0},{top:"35%",left:"65%",xOffset:125,group:4,rotationY:0}];o.forEach((e=>{gsap.set(e,{clearProps:"all"});const t=e.querySelector(".dates-item_inner");t&&gsap.set(t,{clearProps:"all"})})),o.forEach(((e,t)=>{const i=n[t%n.length];Object.assign(e.style,{position:"absolute",top:i.top,left:i.left,width:"12em",minWidth:"12em",transform:"translate(-50%, -50%)"});const o=e.querySelector(".dates-item_inner");o&&(o.style.filter="blur(10px)"),gsap.set(e,{xPercent:-50,yPercent:-50,z:-500,x:0,scale:0,transformPerspective:2e3,transformOrigin:"center center",force3D:!0,opacity:0})})),setTimeout((()=>{e&&gsap.to(e,{opacity:1,duration:.5,ease:"power2.out"});const t=gsap.timeline({repeat:-1,defaults:{duration:3,ease:"none"}});this._datesTimeline=t;const i=n.reduce(((e,t,i)=>{if(i>=o.length)return e;const n=o[i];return e[t.group]||(e[t.group]=[]),e[t.group].push({item:n,position:t}),e}),{});Object.entries(i).forEach((([e,i],o)=>{const n=2*o;i.forEach((({item:e,position:i},o)=>{const r=e.querySelector(".dates-item_inner"),s=1*Math.random(),a=.3*o,l=gsap.timeline({repeat:-1,repeatDelay:0});l.to(e,{z:1500,x:i.xOffset,scale:1,opacity:1,rotationY:i.rotationY,duration:15,force3D:!0,transformPerspective:2e3,transformOrigin:"center center"},a).to(r,{filter:"blur(0px)",duration:1.5,ease:"power2.out"},"-="+(13-s-a)).to(r,{filter:"blur(10px)",duration:1.5,ease:"power2.in"},"-=5").to(e,{opacity:0,duration:.5,ease:"power1.in"},"-=2").set(e,{z:-500,x:0,scale:0,rotationY:0,opacity:0,immediateRender:!1,force3D:!0}).set(r,{filter:"blur(10px)",immediateRender:!1}),t.add(l,n)}))}))}),50)},initCursorAnimation:function(){if(!(window.innerWidth>1024))return;const e=(e,t,i)=>(1-i)*e+i*t;let t={x:0,y:0},i={x:0,y:0},o={x:0,y:0},n=null;function r(e){const i=e.clientX+window.scrollX,o=e.clientY+window.scrollY;t={x:i,y:o}}document.body.addEventListener("mousemove",r),document.body.addEventListener("touchmove",r),window.homeCursorAnimationCleanup=function(){document.body.removeEventListener("mousemove",r),document.body.removeEventListener("touchmove",r),n&&(cancelAnimationFrame(n),n=null),window.homeAnimationFrame&&(cancelAnimationFrame(window.homeAnimationFrame),window.homeAnimationFrame=null)};class s{constructor(e){this.DOM={el:e,inner:e.querySelector(".content__img-inner")},this.rect=this.DOM.el.getBoundingClientRect(),this.timeline=null}}class a{constructor(e){this.DOM={el:e},this.images=Array.from(this.DOM.el.querySelectorAll(".content__img")).map((e=>new s(e))),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImages=new Set,this.threshold=100,this.animationFrame=null;const i=()=>{o={...t},this.animationFrame=requestAnimationFrame((()=>this.render())),window.homeAnimationFrame=this.animationFrame,window.removeEventListener("mousemove",i),window.removeEventListener("touchmove",i)};window.addEventListener("mousemove",i),window.addEventListener("touchmove",i),window.activeHomeImageTrail=this}cleanup(){this.activeImages.forEach((e=>{e.timeline&&e.timeline.kill()})),this.activeImages.clear(),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null)}render(){let n=Math.hypot(t.x-i.x,t.y-i.y);o.x=e(o.x,t.x,.1),o.y=e(o.y,t.y,.1),this.activeImages.forEach((e=>{e.timeline&&1!==e.timeline.progress()||this.activeImages.delete(e)})),n>this.threshold&&(this.showNextImage(),i={...t}),this.animationFrame=requestAnimationFrame(this.render.bind(this)),window.homeAnimationFrame=this.animationFrame}showNextImage(){let e=t.x-o.x,i=t.y-o.y,n=Math.sqrt(e*e+i*i);this.zIndexVal++,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;const r=this.images[this.imgPosition];let s=Math.max(0,20-.2*n);gsap.killTweensOf(r.DOM.el),r.timeline=gsap.timeline({onStart:()=>{this.activeImages.add(r)},onComplete:()=>{this.activeImages.delete(r)}}).fromTo(r.DOM.el,{opacity:0,scale:0,zIndex:this.zIndexVal,x:o.x-r.rect.width/2,y:o.y-r.rect.height/2,filter:"grayscale(100%) blur(20px)"},{duration:.8,ease:"power2.out",opacity:1,scale:1.2,x:t.x-r.rect.width/2,y:t.y-r.rect.height/2,filter:`grayscale(0%) blur(${s}px)`},0).to(r.DOM.el,{duration:1.2,ease:"power2.out",opacity:0,scale:.8,filter:"grayscale(100%) blur(20px)"},.8)}}!function(){const e=document.querySelectorAll(".content__img-inner");let t=0;const i=e.length;function o(){if(t++,t===i){const e=document.querySelector(".image-wrap");e&&new a(e)}}e.forEach((e=>{e.complete?o():(e.addEventListener("load",o),e.addEventListener("error",o))}))}()}},TemiPage={_hoverDisabled:!1,_isMoving:!1,_isDragging:!1,_lastMouseX:0,_lastMouseY:0,_resizeTimeout:null,_hoverTimelines:[],_cardHandlers:[],_scrollerHandlers:[],_wheelHandler:null,initCardHoverAnimations:function(e){if(e=e||document,window._temiHoverTimelines=window._temiHoverTimelines||[],window._temiCardHandlers=window._temiCardHandlers||[],!window.matchMedia("(min-width: 1024px)").matches)return;e.querySelectorAll(".card-item").forEach((e=>{const t=e.querySelector(".card-top_text"),i=e.querySelector(".card-icon"),o=e.querySelector(".card-icon-wrap");if(!t)return;e.querySelectorAll(".card-icon-wrap-clone").forEach((e=>e.remove()));let n=null;o&&i&&(n=o.cloneNode(!0),n.classList.add("card-icon-wrap-clone"),i.appendChild(n),gsap.set(o,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",xPercent:0}),gsap.set(n,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",xPercent:-100}),gsap.set(i,{scale:.5,opacity:0})),e._initialState={backgroundColor:"rgba(199, 206, 209, 0.4)",topTextOpacity:0,iconScale:.5,iconOpacity:0,iconWrapXPercent:0,iconWrapCloneXPercent:-100};const r=()=>{if(this._hoverDisabled||this._isMoving||this._isDragging)return;gsap.killTweensOf([e,t,i,o,n].filter(Boolean));const r=gsap.timeline({defaults:{duration:.4,ease:"power2.out"}});r.to(e,{backgroundColor:"rgba(199, 206, 209, 1)",duration:.3},0),r.to(t,{opacity:1,duration:.3},0),i&&o&&n&&(r.to(i,{scale:1,opacity:1,ease:"back.out(1.7)"},0),r.to(o,{xPercent:100,ease:"back.out(1.7)"},0),r.to(n,{xPercent:0,ease:"back.out(1.7)"},0)),window._temiHoverTimelines.push(r),e._isHovered=!0},s=()=>{if(this._hoverDisabled||this._isMoving||this._isDragging)return;gsap.killTweensOf([e,t,i,o,n].filter(Boolean));const r=gsap.timeline({defaults:{duration:.3,ease:"power2.in"}});r.to(e,{backgroundColor:e._initialState.backgroundColor},0),r.to(t,{opacity:e._initialState.topTextOpacity},0),i&&o&&n&&(r.to(i,{scale:e._initialState.iconScale,opacity:e._initialState.iconOpacity},0),r.to(o,{xPercent:e._initialState.iconWrapXPercent},0),r.to(n,{xPercent:e._initialState.iconWrapCloneXPercent},0)),window._temiHoverTimelines.push(r),e._isHovered=!1};e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",s),window._temiCardHandlers.push({element:e,events:[{type:"mouseenter",handler:r},{type:"mouseleave",handler:s}]})}));const t=e=>{this._lastMouseX=e.clientX,this._lastMouseY=e.clientY};document.addEventListener("mousemove",t),window._temiCardHandlers.push({element:document,events:[{type:"mousemove",handler:t}]})},checkCardUnderCursor:function(){if(this._hoverDisabled||this._isMoving||this._isDragging)return;const e=document.querySelectorAll(".card-item");let t=!1;return e.forEach((e=>{const i=e.getBoundingClientRect(),o=this._lastMouseX>=i.left&&this._lastMouseX<=i.right&&this._lastMouseY>=i.top&&this._lastMouseY<=i.bottom;if(o&&!e._isHovered){const i=new MouseEvent("mouseenter");e.dispatchEvent(i),t=!0}else if(!o&&e._isHovered){const t=new MouseEvent("mouseleave");e.dispatchEvent(t)}})),t},resetAllCardHoverStates:function(){document.querySelectorAll(".card-item").forEach((e=>{if(e._isHovered){const t=e.querySelector(".card-top_text"),i=e.querySelector(".card-icon"),o=e.querySelector(".card-icon-wrap"),n=e.querySelector(".card-icon-wrap-clone");gsap.killTweensOf([e,t,i,o,n].filter(Boolean)),gsap.set(e,{backgroundColor:e._initialState.backgroundColor}),t&&gsap.set(t,{opacity:e._initialState.topTextOpacity}),i&&gsap.set(i,{scale:e._initialState.iconScale,opacity:e._initialState.iconOpacity}),o&&gsap.set(o,{xPercent:e._initialState.iconWrapXPercent}),n&&gsap.set(n,{xPercent:e._initialState.iconWrapCloneXPercent}),e._isHovered=!1}}))},initSliderAndParallax:function(e){if(window.innerWidth<=991)return;const t=this;window._temiScrollerHandlers=window._temiScrollerHandlers||[];const i=document.querySelector(".timeline.cc-temi"),o=document.querySelector(".scroller.cc-temi"),n=document.querySelector(".temi-slider");if(!i||!o||!n)return;gsap.set(o,{clearProps:"all",x:0,scale:1}),gsap.set(n,{clearProps:"all",x:0});const r=i.offsetWidth,s=o.offsetWidth,a=n.scrollWidth-n.clientWidth+64,l=r-s-4;function c(){const e=document.querySelectorAll(".timeline.cc-temi .marker"),t=o.getBoundingClientRect().left+s/2;e.forEach((e=>{const i=e.getBoundingClientRect(),o=Math.abs(i.left-t);o<30?(e.classList.add("active"),e.classList.remove("semi-active")):o<60?(e.classList.add("semi-active"),e.classList.remove("active")):e.classList.remove("active","semi-active")}))}function u(){const e=gsap.getProperty(n,"x");document.querySelectorAll(".card-component.is-cms .card-image .image-full").forEach((t=>{gsap.set(t,{x:.05*e})}))}let d,h=!1,m=0,p=0;const g=document.querySelectorAll(".card-component.is-cms");function f(e){e<1?(t._hoverDisabled=!0,"function"==typeof t.resetAllCardHoverStates&&t.resetAllCardHoverStates()):1===e&&setTimeout((()=>{t._hoverDisabled=!1,"function"==typeof t.checkCardUnderCursor&&t.checkCardUnderCursor()}),300),g.forEach((t=>{t.style.transform=`translate3d(0px, 0px, 0px) scale(${e}, ${e})`,t.style.transition="transform 0.3s ease-out"}))}g.forEach((e=>{e.style.willChange="transform",e.style.backfaceVisibility="hidden"})),gsap.set(g,{scale:1});const _=e=>{h=!0,t._isDragging=!0,m=e.clientX-gsap.getProperty(o,"x"),f(.94),"function"==typeof t.resetAllCardHoverStates&&t.resetAllCardHoverStates(),g.forEach((e=>{e.style.willChange="transform"})),gsap.to(o,{scale:1.1,duration:.3,ease:"power2.out"})},v=e=>{if(!h)return;p=e.clientX-m,p=gsap.utils.clamp(2,r-s-2,p),gsap.to(o,{x:p,duration:2,ease:"expo.out",overwrite:"auto"});let t=-a*((p-2)/l);gsap.to(n,{x:t,duration:1.4,ease:"expo.out",overwrite:"auto",onUpdate:()=>{u(),c()}})},y=()=>{if(!h)return;h=!1,t._isDragging=!1,f(1),gsap.to(o,{scale:1,duration:.3,ease:"power2.out"});let e=p-gsap.getProperty(o,"x"),i=p+1.5*e;i=gsap.utils.clamp(2,r-s-2,i),gsap.to(o,{x:i,duration:2.2,ease:"expo.out"});let c=-a*((i-2)/l);gsap.to(n,{x:c,duration:2.2,ease:"expo.out",onUpdate:u,onComplete:()=>{"function"==typeof t.checkCardUnderCursor&&t.checkCardUnderCursor()}})},w=e=>{if(window.innerWidth>991){e.preventDefault(),t._isMoving||(t._isMoving=!0,f(.94));const i=8,r=gsap.getProperty(n,"x")+(Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY)*-i,s=gsap.utils.clamp(-a,0,r),m=Math.abs(s)/a,p=2+l*m;gsap.to(n,{x:s,duration:1.8,ease:"expo.out",overwrite:"auto",onUpdate:()=>{u(),c()}}),gsap.to(o,{x:p,duration:1.8,ease:"expo.out",overwrite:"auto",onUpdate:()=>{c()}}),clearTimeout(d),d=setTimeout((()=>{h||(t._isMoving=!1,f(1),setTimeout((()=>{t._isMoving||t._isDragging||(g.forEach((e=>{e.style.willChange="auto"})),"function"==typeof t.checkCardUnderCursor&&t.checkCardUnderCursor())}),400))}),75)}};o.removeEventListener("mousedown",_),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y),document.removeEventListener("wheel",this._wheelHandler),o.addEventListener("mousedown",_),document.addEventListener("mousemove",v),document.addEventListener("mouseup",y),document.addEventListener("wheel",w,{passive:!1}),this._wheelHandler=w,window._temiScrollerHandlers=[{element:o,type:"mousedown",handler:_},{element:document,type:"mousemove",handler:v},{element:document,type:"mouseup",handler:y},{element:document,type:"wheel",handler:w}];const b=()=>{clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout((()=>{window.innerWidth<=991&&(n&&gsap.set(n,{x:0}),o&&gsap.set(o,{x:0}),gsap.set(g,{scale:1}))}),100)};window.addEventListener("resize",b),window._temiScrollerHandlers.push({element:window,type:"resize",handler:b})},init:function(e){window._temiHoverTimelines=window._temiHoverTimelines||[],window._temiCardHandlers=window._temiCardHandlers||[],window._temiScrollerHandlers=window._temiScrollerHandlers||[],this.initCardHoverAnimations(e),this.initSliderAndParallax(e)},cleanup:function(){window._temiHoverTimelines&&(window._temiHoverTimelines.forEach((e=>{e&&e.kill()})),window._temiHoverTimelines=[]),window._temiCardHandlers&&(window._temiCardHandlers.forEach((e=>{e.events&&e.events.forEach((t=>{e.element.removeEventListener(t.type,t.handler)}))})),window._temiCardHandlers=[]),window._temiScrollerHandlers&&(window._temiScrollerHandlers.forEach((e=>{e.element.removeEventListener(e.type,e.handler)})),window._temiScrollerHandlers=[]),this._wheelHandler&&(document.removeEventListener("wheel",this._wheelHandler),this._wheelHandler=null),this._hoverDisabled=!1,this._isMoving=!1,this._isDragging=!1,this._lastMouseX=0,this._lastMouseY=0,this._resizeTimeout=null,document.querySelectorAll(".card-item").forEach((e=>{gsap.set(e,{clearProps:"all"});const t=e.querySelector(".card-top_text"),i=e.querySelector(".card-icon"),o=e.querySelector(".card-icon-wrap"),n=e.querySelector(".card-icon-wrap-clone");t&&gsap.set(t,{clearProps:"all"}),i&&gsap.set(i,{clearProps:"all"}),o&&gsap.set(o,{clearProps:"all"}),n&&gsap.set(n,{clearProps:"all"}),n&&n.remove()}));const e=document.querySelector(".scroller"),t=document.querySelector(".temi-slider");e&&gsap.set(e,{clearProps:"all"}),t&&gsap.set(t,{clearProps:"all"})}},StoriaPage={_initialized:!1,_circleParent:null,_circleItem:null,_itemLength:0,_rotateAmount:0,_previousIndex:0,_currentRotation:0,_isAnimating:!1,_audioTimeout:null,_audioCache:new Map,_currentSound:null,_touchStartX:0,_touchStartY:0,_MIN_SWIPE_DISTANCE:50,_MAX_SWIPE_VERTICAL_DISTANCE:75,init:function(e){this.cleanup(),"undefined"!=typeof SplitText&&gsap.registerPlugin(SplitText),this.preInit(),this.initEvents(),this.initScrollerControl()},preInit:function(){if(this._circleParent=$(".circle_component"),this._circleItem=$(".circle_item"),this._itemLength=this._circleItem.length,this._circleParent.length&&this._itemLength&&(this._rotateAmount=360/this._itemLength,this._circleItem.each(((e,t)=>{const i=$(t),o=this._rotateAmount*e;i.css("transform",`rotate(${o}deg)`),i.removeClass("current")})),this._circleItem.length)){const e=$(this._circleItem[0]);setTimeout((()=>{e.addClass("current")}),100);const t=e.find(".circle_description")[0];t&&this.animateCurrentDescription(t)}},initEvents:function(){this._circleItem&&this._circleItem.each(((e,t)=>{const i=$(t);i.find(".circle_link").on("click",(e=>{if(i.hasClass("current"))return e.preventDefault(),!1;const t=this._circleItem.filter(".current");t.length&&this.makeDescriptionOut(t),this.makeItemActive(i),this.updateStoriaScrollerPosition&&this.updateStoriaScrollerPosition(i.index())}))})),$(document).on("wheel.storia",(e=>{if(!this._circleParent||!this._circleParent.length||this._isAnimating)return;const t=e.originalEvent.deltaY;if(Math.abs(t)<15)return;e.preventDefault();const i=this._circleItem.filter(".current");let o;t>0?(o=i.next(".circle_item"),o.length||(o=this._circleItem.first())):(o=i.prev(".circle_item"),o.length||(o=this._circleItem.last())),o&&o.length&&!o.is(i)&&(this.makeDescriptionOut(i),this.makeItemActive(o),this.updateStoriaScrollerPosition&&this.updateStoriaScrollerPosition(o.index()))})),$('[data-storia="back"], [data-storia="forward"]').off("click"),$('[data-storia="back"], [data-storia="forward"]').on("click",(e=>{if(e.preventDefault(),!this._circleParent||!this._circleParent.length||this._isAnimating)return;const t=this._circleItem.filter(".current");if(!t.length)return;let i;"back"===$(e.currentTarget).attr("data-storia")?(i=t.prev(".circle_item"),i.length||(i=this._circleItem.last())):(i=t.next(".circle_item"),i.length||(i=this._circleItem.first())),i&&i.length&&!i.is(t)&&(this.makeDescriptionOut(t),this.makeItemActive(i),this.updateStoriaScrollerPosition&&this.updateStoriaScrollerPosition(i.index()))})),$(document).on("keydown.storia",(e=>{if(!this._circleParent||!this._circleParent.length||this._isAnimating)return;if("storia"===!document.body.getAttribute("data-barba-namespace"))return;if(37!==e.keyCode&&39!==e.keyCode)return;e.preventDefault();const t=this._circleItem.filter(".current");if(!t.length)return;let i;37===e.keyCode?(i=t.prev(".circle_item"),i.length||(i=this._circleItem.last())):(i=t.next(".circle_item"),i.length||(i=this._circleItem.first())),i&&i.length&&!i.is(t)&&(this.makeDescriptionOut(t),this.makeItemActive(i),this.updateStoriaScrollerPosition&&this.updateStoriaScrollerPosition(i.index()))})),"ontouchstart"in window&&($(document).on("touchstart.storia",this.handleTouchStart.bind(this)),$(document).on("touchend.storia",this.handleTouchEnd.bind(this)))},handleTouchStart:function(e){if(!this._circleParent||!this._circleParent.length||this._isAnimating)return;if($(e.target).closest(".circle_item.current .circle_description a, .circle_item.current .circle_description button").length)return void(this._touchStartX=0);const t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];this._touchStartX=t.clientX,this._touchStartY=t.clientY},handleTouchEnd:function(e){if(!this._circleParent||!this._circleParent.length||this._isAnimating||0===this._touchStartX)return void(this._touchStartX=0);const t=e.originalEvent.changedTouches[0],i=t.clientX,o=t.clientY,n=i-this._touchStartX,r=o-this._touchStartY,s=this._touchStartX;if(this._touchStartX=0,this._touchStartY=0,Math.abs(n)<this._MIN_SWIPE_DISTANCE||Math.abs(r)>this._MAX_SWIPE_VERTICAL_DISTANCE)return;e.preventDefault();const a=s<window.innerWidth/2?"left":"right",l=this._circleItem.filter(".current");if(!l.length)return;let c;if(n>this._MIN_SWIPE_DISTANCE&&"left"===a)c=l.prev(".circle_item"),c.length||(c=this._circleItem.last());else{if(!(n<-this._MIN_SWIPE_DISTANCE&&"right"===a))return;c=l.next(".circle_item"),c.length||(c=this._circleItem.first())}c&&c.length&&!c.is(l)&&(this.makeDescriptionOut(l),this.makeItemActive(c))},isModernBrowser:function(){const e=window.navigator.userAgent,t=/Safari/.test(e)&&!/Chrome|Edg/.test(e),i=/Firefox/.test(e);return!(t||i)},animateCurrentDescription:function(e){if(!this.isModernBrowser())return gsap.timeline();const t=gsap.timeline();return setTimeout((()=>{e.querySelectorAll('[data-split="storia-char"]').forEach((e=>{e.querySelector(".single-letter")||new SplitText(e,{type:"chars",charsClass:"single-letter",autoSplit:!0})})),e.querySelectorAll('[data-split="storia-line-char"]').forEach((e=>{e.querySelector(".single-line")||new SplitText(e,{type:"lines",linesClass:"single-line",autoSplit:!0}),Array.from(e.querySelectorAll(".single-line")).forEach((e=>{e.querySelector(".single-letter")||new SplitText(e,{type:"chars",charsClass:"single-letter"})}))})),e.querySelectorAll('[data-split="storia-line"]').forEach((e=>{e.querySelector(".single-line")||new SplitText(e,{type:"lines",linesClass:"single-line",autoSplit:!0}),e.querySelectorAll(".single-line").forEach((e=>{if(!e.parentNode.classList.contains("single-line-wrap")){const t=document.createElement("div");t.classList.add("single-line-wrap"),e.parentNode.insertBefore(t,e),t.appendChild(e)}}))}));const i=e.querySelector(".circle_desc-line");i&&t.fromTo(i,{height:"0%"},{height:"100%",duration:.6,ease:"power2.out"}),e.querySelectorAll('[data-split="storia-char"]').forEach((e=>{const i=e.querySelectorAll(".single-letter");t.fromTo(i,{opacity:0,filter:"blur(10px)"},{opacity:1,filter:"blur(0px)",duration:.8,ease:"power2.out",stagger:.02},"-=0.4")})),e.querySelectorAll('[data-split="storia-line-char"]').forEach((e=>{Array.from(e.querySelectorAll(".single-line")).forEach(((e,i)=>{const o=e.querySelectorAll(".single-letter");t.fromTo(o,{opacity:0,filter:"blur(10px)"},{opacity:1,filter:"blur(0px)",duration:.5,ease:"power2.out",stagger:.02},.05*i+.5)}))})),e.querySelectorAll('[data-split="storia-line"]').forEach((e=>{const i=e.querySelectorAll(".single-line");t.fromTo(i,{y:"100%"},{y:"0%",duration:.5,ease:"power2.out",stagger:.05},"-=0.6")}));const o=e.querySelector(".button-group");o&&t.fromTo(o,{y:150,opacity:0,filter:"blur(10px)"},{y:0,opacity:1,filter:"blur(0px)",duration:.5,ease:"power2.out"},"-=0.4")}),400),e.animationTimeline=t,t},makeDescriptionOut:function(e){e.removeClass("current")},makeItemActive:function(e){if(!e||!e.length||this._isAnimating)return;this._isAnimating=!0;const t=e.index(),i=-t*this._rotateAmount;let o=0;this._circleParent&&this._circleParent.length&&(o=gsap.getProperty(this._circleParent[0],"rotation")||0);let n=o%360;n>180&&(n-=360),n<-180&&(n+=360);let r=i%360;r>180&&(r-=360),r<-180&&(r+=360);let s=r-n;Math.abs(s)>180&&(s=s>0?s-360:s+360);const a=o+s;this._circleItem.removeClass("current"),e.addClass("current"),gsap.to(this._circleParent,{rotation:a,duration:.5,ease:"power1.out",onComplete:()=>{this._previousIndex=t,this._currentRotation=a,this._isAnimating=!1}});const l=e.find(".circle_description")[0];l&&this.animateCurrentDescription(l),this._audioTimeout&&clearTimeout(this._audioTimeout),this._audioTimeout=setTimeout((()=>{e.hasClass("current")&&this.playAudioForItem(e)}),1500)},playAudioForItem:function(e){const t=e.attr("data-howler-src");t&&(this._currentSound&&this._currentSound.stop(),this._audioCache.has(t)?(this._currentSound=this._audioCache.get(t),this._currentSound.seek(0),this._currentSound.play()):this._currentSound=new Howl({src:[t],html5:!0,preload:!0,onload:()=>{this._audioCache.set(t,this._currentSound),this._currentSound.play()},onloaderror:(e,i)=>{this._audioCache.delete(t),this._currentSound=null},onplayerror:(e,t)=>{this._currentSound=null}}))},cleanup:function(){$(document).off("wheel.storia"),$(document).off("touchstart.storia touchend.storia"),$('[data-storia="back"], [data-storia="forward"]').off("click"),this._circleItem&&this._circleItem.each((function(){$(this).find(".circle_link").off("click")})),this._circleParent&&gsap.killTweensOf(this._circleParent),this._circleItem&&this._circleItem.filter(".current").each(((e,t)=>{const i=$(t).find(".circle_description")[0];i&&i.animationTimeline&&i.animationTimeline.kill()})),this._currentSound&&(this._currentSound.stop(),this._currentSound=null),this._audioCache.forEach((e=>{e&&"function"==typeof e.unload&&e.unload()})),this._audioCache.clear(),this._audioTimeout&&(clearTimeout(this._audioTimeout),this._audioTimeout=null),this._circleParent=this._circleItem=null,this._itemLength=this._rotateAmount=this._previousIndex=this._currentRotation=0,this._isAnimating=!1,window._storiaScrollerHandlers&&(window._storiaScrollerHandlers.forEach((e=>{e.element.removeEventListener(e.type,e.handler)})),window._storiaScrollerHandlers=[])},initScrollerControl:function(){if(window.innerWidth<=991)return;const e=document.querySelector(".scroller.cc-storia"),t=document.querySelector(".timeline.cc-storia"),i=document.querySelector(".toolbar_storia"),o=document.querySelector(".storia_timeline-wrap");if(!(e&&t&&i&&this._circleParent&&this._circleParent.length))return;const n=e.querySelector(".is-drag");window._storiaScrollerHandlers=window._storiaScrollerHandlers||[];const r=e.offsetWidth,s=580-r-4,a=s/(this._itemLength-1);if(o){o.setAttribute("role","slider"),o.setAttribute("aria-label","Storia timeline"),o.setAttribute("aria-valuemin","0"),o.setAttribute("aria-valuemax",(this._itemLength-1).toString());const e=this._circleItem.filter(".current").index();o.setAttribute("aria-valuenow",e.toString());const t=$(this._circleItem[e]).find(".circle_date");if(t.length){const e=t.text();o.setAttribute("aria-valuetext",e)}}const l=e=>{if(n&&this._circleItem&&this._circleItem.length>e){const t=$(this._circleItem[e]).find(".circle_date");if(t.length){const i=t.text();n.textContent=i,o&&(o.setAttribute("aria-valuetext",i),o.setAttribute("aria-valuenow",e.toString()))}}},c=()=>{const t=document.querySelectorAll(".timeline.cc-storia .marker"),i=e.getBoundingClientRect().left+r/2;t.forEach((e=>{const t=e.getBoundingClientRect(),o=Math.abs(t.left-i);o<30?(e.classList.add("active"),e.classList.remove("semi-active")):o<60?(e.classList.add("semi-active"),e.classList.remove("active")):e.classList.remove("active","semi-active")}))};this.updateStoriaScrollerPosition=t=>{if(!e)return;const i=t*a;gsap.to(e,{x:i,duration:.3,ease:"power2.out",onUpdate:c,onComplete:()=>{l(t)}})};const u=this._circleItem.filter(".current").index(),d=u*a;setTimeout((()=>{gsap.set(e,{x:d,clearProps:"transform"}),c()}),100),l(u);let h=!1,m=0,p=0,g=0,f=0,_=0,v=null;const y=[];for(let e=0;e<this._itemLength;e++)y.push(-e*this._rotateAmount);const w=t=>{this._isAnimating||(h=!0,m=t.clientX,g=m,p=gsap.getProperty(e,"x"),_=Date.now(),this._circleItem.removeClass("current"),gsap.to(e,{scale:1.1,duration:.3,ease:"power2.out"}),cancelAnimationFrame(v),b())},b=()=>{if(!h)return;const t=g,i=t-m,o=Math.max(0,Math.min(s,p+i)),n=gsap.getProperty(e,"x"),r=n+.2*(o-n);gsap.set(e,{x:r}),c();const u=-(r/s)*(this._itemLength-1)*this._rotateAmount;this._circleParent&&this._circleParent.length&&gsap.set(this._circleParent,{rotation:u});const d=Math.round(r/a);d>=0&&d<this._itemLength&&l(d);const y=Date.now(),w=y-_;if(w>0){f=(t-g)/w*20}_=y,g=t,v=requestAnimationFrame(b)},S=e=>{h&&(g=e.clientX)},x=t=>{if(!h)return;h=!1,cancelAnimationFrame(v),gsap.to(e,{scale:1,duration:.3,ease:"power2.out"});const i=gsap.getProperty(e,"x");let o=i;Math.abs(f)>.5&&(o=Math.max(0,Math.min(s,i+50*f)));const n=Math.round(o/a),r=n*a;gsap.to(e,{x:r,duration:.5,ease:"power2.out",onUpdate:c}),l(n);const u=-n*this._rotateAmount;gsap.to(this._circleParent,{rotation:u,duration:.5,ease:"power2.out",onComplete:()=>{if(this._circleItem&&this._circleItem.length>n){const e=$(this._circleItem[n]);e.addClass("current");const t=e.find(".circle_description")[0];t&&this.animateCurrentDescription(t),this._audioTimeout=setTimeout((()=>{e.hasClass("current")&&this.playAudioForItem(e)}),1e3),this._previousIndex=n,this._currentRotation=u}}})},E=t=>{if(window.innerWidth<=991||this._isAnimating)return;t.preventDefault();const i=this._circleItem.filter(".current").index();let o;(Math.abs(t.deltaX)>Math.abs(t.deltaY)?t.deltaX:t.deltaY)>0?(o=i+1,o>=this._itemLength&&(o=0)):(o=i-1,o<0&&(o=this._itemLength-1));const n=o*a;if(gsap.to(e,{x:n,duration:.5,ease:"power2.out",onUpdate:c,onComplete:()=>{l(o)}}),this._circleItem&&this._circleItem.length>o){const e=$(this._circleItem[o]);if(!e.hasClass("current")){const t=this._circleItem.filter(".current");t.length&&this.makeDescriptionOut(t),this.makeItemActive(e)}}};e.removeEventListener("mousedown",w),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",x),t.removeEventListener("wheel",E),e.addEventListener("mousedown",w),document.addEventListener("mousemove",S),document.addEventListener("mouseup",x),t.addEventListener("wheel",E,{passive:!1}),window._storiaScrollerHandlers=[{element:e,type:"mousedown",handler:w},{element:document,type:"mousemove",handler:S},{element:document,type:"mouseup",handler:x},{element:t,type:"wheel",handler:E}]},resetScrollerPosition:function(){if(window.innerWidth<=991)return;const e=document.querySelector(".scroller.cc-storia");if(!e)return;const t=window.getComputedStyle(e).transform;if(t&&"none"!==t){gsap.timeline().to(e,{x:0,duration:1.2,ease:"power3.out",onUpdate:()=>{const t=document.querySelectorAll(".timeline.cc-storia .marker"),i=e.getBoundingClientRect().left+e.offsetWidth/2;t.forEach((e=>{const t=e.getBoundingClientRect(),o=Math.abs(t.left-i);o<30?(e.classList.add("active"),e.classList.remove("semi-active")):o<60?(e.classList.add("semi-active"),e.classList.remove("active")):e.classList.remove("active","semi-active")}))}})}}},ListPage={_initialized:!1,_rafIds:[],_sounds:[],_handlers:{mouseEnter:[],mouseLeave:[],svgMouseMove:[],svgMouseLeave:[],resize:[],click:[],beforeUnload:null},_activeItem:null,_audioTriggered:!1,_currentAudioIndex:0,_initialAudioPreloadAttempted:!1,init:function(e){this.cleanup(),this._rafIds=[],this._sounds=[],this._handlers={mouseEnter:[],mouseLeave:[],svgMouseMove:[],svgMouseLeave:[],resize:[],click:[],beforeUnload:null},this._activeItem=null,this._audioTriggered=!1,this._currentAudioIndex=0,this._initialAudioPreloadAttempted=!1,this.initListInteractions(),this._initialized=!0},cleanup:function(){this._rafIds&&this._rafIds.length&&(this._rafIds.forEach((e=>{cancelAnimationFrame(e)})),this._rafIds=[]),this._sounds&&this._sounds.length&&(this._sounds.forEach((e=>{e&&(e.stop(),e.unload())})),this._sounds=[]),this._handlers&&(this._handlers.mouseEnter&&this._handlers.mouseEnter.forEach((({element:e,handler:t})=>{e&&e.removeEventListener("mouseenter",t)})),this._handlers.mouseLeave&&this._handlers.mouseLeave.forEach((({element:e,handler:t})=>{e&&e.removeEventListener("mouseleave",t)})),this._handlers.svgMouseMove&&this._handlers.svgMouseMove.forEach((({element:e,handler:t})=>{e&&e.removeEventListener("mousemove",t)})),this._handlers.svgMouseLeave&&this._handlers.svgMouseLeave.forEach((({element:e,handler:t})=>{e&&e.removeEventListener("mouseleave",t)})),this._handlers.resize&&this._handlers.resize.forEach((({element:e,handler:t})=>{e&&e.removeEventListener("resize",t)})),this._handlers.click&&this._handlers.click.forEach((({element:e,handler:t})=>{e&&e.removeEventListener("click",t)})),this._handlers.beforeUnload&&window.removeEventListener("beforeunload",this._handlers.beforeUnload.handler),this._handlers={mouseEnter:[],mouseLeave:[],svgMouseMove:[],svgMouseLeave:[],resize:[],click:[],beforeUnload:null}),document.querySelectorAll(".cms-list-item_item").forEach((e=>{e.style.opacity="",e.style.pointerEvents="";const t=e.querySelector(".list-item_img-wrap");t&&gsap.set(t,{clearProps:"all"})})),document.querySelectorAll(".line-svg").forEach((e=>{e.style.pointerEvents="";const t=e.querySelector("path");if(t){const i=20,o=e.getBoundingClientRect(),n={x:0,y:i},r={x:o.width/2,y:i},s={x:o.width,y:i},a=`M${n.x},${n.y} Q${r.x},${r.y} ${s.x},${s.y}`;t.setAttribute("d",a)}})),this._activeItem=null,this._audioTriggered=!1,this._currentAudioIndex=0,this._initialAudioPreloadAttempted=!1},preloadFirstAudioOnInteraction:function(){const e=["https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/1c6.mp3?v=1740247093056","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/2d6.mp3?v=1740247102500","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/3e6.mp3?v=1740247104658","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/4f6.mp3?v=1740247106403","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/5g6.mp3?v=1740247108213","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/6a6.mp3?v=1740247109940","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/7b6.mp3?v=1740247111678"];"undefined"!=typeof Howl&&!this._initialAudioPreloadAttempted&&e.length>0&&(this._initialAudioPreloadAttempted=!0,this._sounds[0]||(this._sounds[0]=new Howl({src:[e[0]],preload:!0,html5:!0,volume:1,onload:()=>{},onloaderror:(e,t)=>{}})))},playNextSound:function(){const e=["https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/1c6.mp3?v=1740247093056","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/2d6.mp3?v=1740247102500","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/3e6.mp3?v=1740247104658","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/4f6.mp3?v=1740247106403","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/5g6.mp3?v=1740247108213","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/6a6.mp3?v=1740247109940","https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/7b6.mp3?v=1740247111678"];if("undefined"==typeof Howl)return;const t=this._currentAudioIndex;this._sounds[t]||(this._sounds[t]=new Howl({src:[e[t]],preload:!1,html5:!0,volume:1})),this._sounds[t].play(),this._currentAudioIndex=(this._currentAudioIndex+1)%e.length},applyFocusEffect:function(e){const t=document.querySelectorAll(".cms-list-item_item");Array.from(t).forEach(((i,o)=>{const n=t.length,r=Math.min(Math.abs(o-e),Math.abs(o-e-n),Math.abs(o-e+n));let s;s=0===r?1:1===r?.8:2===r?.6:.4,gsap.to(i,{opacity:s,duration:.3,ease:"power2.out"})}))},resetFocusEffect:function(){const e=document.querySelectorAll(".cms-list-item_item");document.body.classList.contains("page-loaded")&&gsap.to(e,{opacity:1,duration:.3,ease:"power2.out"})},hideAllImages:function(){document.querySelectorAll(".cms-list-item_item").forEach(((e,t)=>{const i=e.querySelector(".list-item_img-wrap");i&&(gsap.killTweensOf(i),gsap.set(i,{opacity:0,scale:.95,filter:"blur(10px)"}))})),this._activeItem=null,document.body.classList.contains("page-loaded")&&this.resetFocusEffect()},initListInteractions:function(){if(!window.matchMedia("(min-width: 992px)").matches)return;const e=document.querySelectorAll(".cms-list-item_item");if(!e.length)return;this.hideAllImages();const t=this;e.forEach(((i,o)=>{const n=i.querySelector(".list-item_img-wrap"),r=()=>{if(t.preloadFirstAudioOnInteraction(),t._activeItem&&t._activeItem!==i){const e=t._activeItem.querySelector(".list-item_img-wrap");e&&(gsap.killTweensOf(e),gsap.to(e,{opacity:0,scale:.95,filter:"blur(10px)",duration:.2,ease:"power1.out"}))}t._activeItem=i,n&&(gsap.killTweensOf(n),gsap.to(n,{opacity:1,scale:1,filter:"blur(0px)",duration:.5,ease:"power2.out"})),t.applyFocusEffect(o)},s=()=>{t._activeItem===i&&(n?(gsap.killTweensOf(n),gsap.to(n,{opacity:0,scale:.95,filter:"blur(10px)",duration:.4,ease:"power2.out",onComplete:()=>{t._activeItem===i&&(t._activeItem=null)}})):t._activeItem=null,t.resetFocusEffect())},a=i=>{if(i.target.closest("a"))return e.forEach((e=>{e.style.pointerEvents="none"})),document.querySelectorAll(".line-svg").forEach((e=>{e.style.pointerEvents="none"})),n&&gsap.to(n,{opacity:0,scale:.95,filter:"blur(10px)",duration:.2,ease:"power1.out"}),!0;t.hideAllImages()};i.addEventListener("mouseenter",r),i.addEventListener("mouseleave",s),i.addEventListener("click",a),t._handlers.mouseEnter.push({element:i,handler:r}),t._handlers.mouseLeave.push({element:i,handler:s}),t._handlers.click.push({element:i,handler:a})}));const i=document.querySelector(".cms-list_component");if(i){const e=()=>{t.hideAllImages(),t.resetFocusEffect()};i.addEventListener("mouseleave",e),t._handlers.mouseLeave.push({element:i,handler:e})}const o=e=>{if(e.target.closest("a"))return!0;!e.target.closest(".cms-list-item_item")&&t.hideAllImages()};document.addEventListener("click",o),t._handlers.click.push({element:document,handler:o});const n=()=>{t.hideAllImages()};window.addEventListener("beforeunload",n),t._handlers.beforeUnload={element:window,handler:n},this.initSvgLineAnimations()},initSvgLineAnimations:function(){this._rafIds&&this._rafIds.length&&(this._rafIds.forEach((e=>cancelAnimationFrame(e))),this._rafIds=[]);const e=document.querySelectorAll(".line-svg"),t=this;e.forEach((e=>{e.style.display="none",e.offsetWidth,e.style.display=""})),setTimeout((()=>{e.forEach(((e,i)=>{e.setAttribute("preserveAspectRatio","none"),e.style.pointerEvents="auto",e.style.cursor="pointer",e.style.zIndex="5";const o=e.querySelector("path");if(!o)return;o.style.pointerEvents="auto",o.style.stroke=o.getAttribute("stroke")||"#000000",o.style.strokeWidth=o.getAttribute("stroke-width")||"2",o.style.fill="none";const n=20,r={x:0,y:n},s={x:0,y:n},a={x:0,y:n};let l=!1;let c=null;function u(){const t=e.getBoundingClientRect();r.x=0,s.x=t.width/2,a.x=t.width;const i=`M${r.x},${r.y} Q${s.x},${s.y} ${a.x},${a.y}`;o.setAttribute("d",i)}function d(i){if(l||i.target!==o||(t.preloadFirstAudioOnInteraction(),l=!0,gsap.killTweensOf(s)),l){const t=e.getBoundingClientRect(),o=2*(i.clientY-t.top-n),r=Math.max(-250,Math.min(250,o));s.y=n+r}}function h(){l&&Math.abs(s.y-n)>10&&!t._audioTriggered&&(t.playNextSound(),t._audioTriggered=!0,setTimeout((()=>{t._audioTriggered=!1}),500)),l=!1,gsap.to(s,{duration:1.5,y:n,ease:"elastic(1.5, 0.08)"})}e.removeEventListener("mousemove",d),e.removeEventListener("mouseleave",h),window.removeEventListener("resize",u),e.addEventListener("mousemove",d),e.addEventListener("mouseleave",h),t._handlers.svgMouseMove.push({element:e,handler:d}),t._handlers.svgMouseLeave.push({element:e,handler:h}),window.addEventListener("resize",u),t._handlers.resize.push({element:window,handler:u}),c&&cancelAnimationFrame(c),c=requestAnimationFrame((function t(){if(!document.body.contains(e))return void(c&&(cancelAnimationFrame(c),c=null));const i=`M${r.x},${r.y} Q${s.x},${s.y} ${a.x},${a.y}`;o.setAttribute("d",i),Math.abs(s.y-n)>600&&(l=!1,gsap.to(s,{duration:1.5,y:n,ease:"elastic(1.5, 0.08)"})),c=requestAnimationFrame(t)})),t._rafIds.push(c),u();const m=()=>{t.playNextSound(),l=!0,s.y=120,setTimeout((()=>{l=!1,gsap.to(s,{duration:1.5,y:n,ease:"elastic(1.5, 0.08)"})}),500)};e.addEventListener("click",m),t._handlers.click.push({element:e,handler:m})}))}),100)}},EventPage={_initialized:!1,_youtubeHandlers:[],_galleryHandlers:[],_howlerPlayers:[],_scrollTriggers:[],_scrollSpacers:[],_resizeHandler:null,_scrollTimeout:null,_isMoving:!1,_isDragging:!1,init:function(e){this.cleanup(),setTimeout((()=>{this.initYouTubeThumbnails(),this.initGallerySlider(),setTimeout((()=>{this.initDataWrapFadeOut(),this.initScrollToRevealCTA(),this.initHowlerJSAudioPlayers()}),300)}),100)},cleanup:function(){const e=document.querySelector(".toolbar.cc-event");e&&e.classList.remove("active");const t=document.querySelector(".toolbar_audio");t&&gsap.set(t,{opacity:0}),document.querySelectorAll("[data-howler]").forEach((e=>{e.removeAttribute("data-howler-initialized"),delete e._howlerId})),window.eventHowlerPlayers&&(Object.values(window.eventHowlerPlayers).forEach((e=>{e&&"function"==typeof e.unload&&e.unload()})),window.eventHowlerPlayers={});document.querySelectorAll(".event-text").forEach((e=>{const t=e.querySelector(".event-text-fg");t&&(t.style.clipPath="inset(0 100% 0 0)",t.style.webkitClipPath="inset(0 100% 0 0)")}));document.querySelectorAll(".event_layout-cta-sticky .btn").forEach((e=>{gsap.set(e,{clearProps:"all"})})),window.eventHowlerPlayers&&(Object.values(window.eventHowlerPlayers).forEach((e=>{e&&"function"==typeof e.playing&&e.playing()&&e.stop(),e&&"function"==typeof e.unload&&e.unload()})),window.eventHowlerPlayers={})},initHowlerJSAudioPlayers:function(){window.eventHowlerPlayers&&this.cleanup();const e=document.querySelectorAll("[data-howler]"),t={},i=document.querySelector(".toolbar_audio[data-howler-src]");if(i&&i.getAttribute("data-howler-src")){const e=document.querySelector(".toolbar.cc-event");e&&e.classList.add("active"),gsap.fromTo(i,{opacity:0},{opacity:1,duration:.6,ease:"power2.out",delay:.3})}function o(e){return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}function n(e){Object.keys(t).forEach((i=>{i!==e&&t[i].playing()&&(t[i].pause(),document.getElementById(i)?.setAttribute("data-howler-status","not-playing"),document.getElementById(i)?.classList.remove("is-playing"))}))}e.forEach(((e,i)=>{const r=e.getAttribute("data-howler-src"),s=`howler-${i}`;if(!r)return;e.id=s,e.setAttribute("data-howler-status","not-playing"),e.setAttribute("data-howler-initialized","true");const a=e.querySelector('[data-howler-info="duration"]'),l=e.querySelector('[data-howler-info="progress"]'),c=e.querySelector('[data-howler-control="timeline"]'),u=e.querySelector('[data-howler-control="progress"]'),d=e.querySelector('[data-howler-control="toggle-play"]'),h=new Howl({src:[r],html5:!0,preload:!0,autoplay:!1,pool:1,onload:()=>{a&&(a.textContent=o(h.duration())),e.setAttribute("data-howler-loaded","true")},onplay:()=>{n(s),e.setAttribute("data-howler-status","playing"),e.classList.add("is-playing"),requestAnimationFrame(m),window.music&&window.music.playing()&&(window.music.fade(window.music.volume(),0,300),setTimeout((()=>window.music.pause()),300)),"true"!==localStorage.getItem("soundEnabled")&&(localStorage.setItem("soundEnabled","true"),Howler.mute(!1),updateSoundControl(),updateSoundWaveState())},onpause:()=>{e.setAttribute("data-howler-status","not-playing"),e.classList.remove("is-playing");Object.values(t).some((e=>e.playing()))||!window.music||window.music.playing()||"true"!==localStorage.getItem("soundEnabled")||(window.music.volume(0),window.music.play(),window.music.fade(0,.7,500))},onstop:()=>{e.setAttribute("data-howler-status","not-playing"),e.classList.remove("is-playing")},onend:()=>{!function(){u&&(u.style.width="0%");e.setAttribute("data-howler-status","not-playing"),e.classList.remove("is-playing")}();Object.values(t).some((e=>e.playing()))||!window.music||window.music.playing()||"true"!==localStorage.getItem("soundEnabled")||(window.music.volume(0),window.music.play(),window.music.fade(0,.7,500))}});function m(){h.playing()&&(p(),requestAnimationFrame(m))}function p(){const e=h.seek()||0,t=h.duration()||1;l&&(l.textContent=o(e)),u&&(u.style.width=e/t*100+"%"),c?.setAttribute("aria-valuenow",Math.round(e/t*100))}t[s]=h,d?.addEventListener("click",(function(){const e=h.playing();e?h.pause():(n(s),h.play()),d?.setAttribute("aria-pressed",!e)})),c?.addEventListener("click",(function(t){const i=c.getBoundingClientRect(),o=(t.clientX-i.left)/i.width;h.seek(h.duration()*o),h.playing()||(n(s),h.play(),e.setAttribute("data-howler-status","playing"),e.classList.add("is-playing")),p()})),h.on("seek",p),h.on("play",p)})),window.eventHowlerPlayers=t},initYouTubeThumbnails:function(){const e=document.querySelectorAll(".youtube");e.length&&e.forEach(((e,t)=>{if(!e.dataset.embed)return;if(e.querySelector("img")||e.querySelector("iframe"))return;const i="https://img.youtube.com/vi/"+e.dataset.embed+"/sddefault.jpg",o=new Image;o.src=i,o.loading="eager",o.alt="YouTube video thumbnail",e.appendChild(o),o.addEventListener("error",(function(){o.src="https://via.placeholder.com/480x360?text=Video+Unavailable"}));const n=function(){window.audioManager.pauseBackgroundMusic();const e=document.createElement("iframe");e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",""),e.setAttribute("src","https://www.youtube.com/embed/"+this.dataset.embed+"?rel=0&showinfo=0&autoplay=1"),this.innerHTML="",this.appendChild(e)};e.addEventListener("click",n),this._youtubeHandlers.push({element:e,handler:n})}))},initGallerySlider:function(){setTimeout((()=>{const e=document.querySelector(".timeline.cc-gallery"),t=document.querySelector(".scroller.cc-gallery"),i=document.querySelector(".gallery-slider");if(!e||!t||!i)return;i.hasAttribute("data-initialized")||(gsap.set(t,{clearProps:"all",x:0,scale:1}),gsap.set(i,{clearProps:"all",x:0}),i.setAttribute("data-initialized","true"));const o=e.offsetWidth,n=t.offsetWidth,r=i.scrollWidth-i.clientWidth+64,s=o-n-4;gsap.getProperty(t,"x"),gsap.getProperty(i,"x");function a(){const e=document.querySelectorAll(".marker");if(!e.length)return;const i=t.getBoundingClientRect().left+n/2;e.forEach((e=>{const t=e.getBoundingClientRect(),o=Math.abs(t.left-i);o<30?(e.classList.add("active"),e.classList.remove("semi-active")):o<60?(e.classList.add("semi-active"),e.classList.remove("active")):e.classList.remove("active","semi-active")}))}let l=!1,c=0,u=0;const d=document.querySelectorAll(".gallery-component");function h(e){d.forEach((t=>{t.style.transform=`translate3d(0px, 0px, 0px) scale(${e}, ${e})`,t.style.transition="transform 0.3s ease-out"}))}d.forEach((e=>{e.style.willChange="transform",e.style.backfaceVisibility="hidden"})),gsap.set(d,{scale:1});const m=this;function p(){m._isMoving||(m._isMoving=!0,h(.975))}function g(){m._isMoving=!1,h(1),setTimeout((()=>{m._isMoving||m._isDragging||d.forEach((e=>{e.style.willChange="auto"}))}),400)}function f(e){return e.type.includes("touch")?e.touches[0].clientX:e.clientX}function _(e){e.type.includes("touch")&&e.preventDefault(),l=!0,m._isDragging=!0;const i=gsap.getProperty(t,"x")||0;c=f(e)-i,d.forEach((e=>{e.style.willChange="transform"})),gsap.to(t,{scale:1.1,duration:.3,ease:"power2.out"})}function v(e){if(!l)return;e.type.includes("touch")&&e.preventDefault(),p.call(m),u=f(e)-c,u=gsap.utils.clamp(2,o-n-2,u),gsap.to(t,{x:u,duration:.5,ease:"power2.out",overwrite:"auto"});const d=-r*((u-2)/s);gsap.to(i,{x:d,duration:.5,ease:"power2.out",overwrite:"auto",onUpdate:a})}function y(e){l&&(l=!1,m._isDragging=!1,g.call(m),gsap.to(t,{scale:1,duration:.3,ease:"power2.out"}))}const w=e=>{if(null!==e.target.closest(".gallery-component, .gallery-slider, .timeline.cc-gallery, .scroller.cc-gallery")&&Math.abs(e.deltaX)>Math.abs(e.deltaY)){e.preventDefault(),p.call(m);const o=8,n=gsap.getProperty(i,"x")+e.deltaX*-o,l=gsap.utils.clamp(-r,0,n),c=Math.abs(l)/r,u=2+s*c;gsap.to(i,{x:l,duration:1.8,ease:"expo.out",overwrite:"auto",onUpdate:()=>{a()}}),gsap.to(t,{x:u,duration:1.8,ease:"expo.out",overwrite:"auto"}),clearTimeout(m._scrollTimeout),m._scrollTimeout=setTimeout((()=>{m._isDragging||g.call(m)}),75)}},b=()=>{const e=window.innerWidth,o=i.getAttribute("data-last-width")||e;i.setAttribute("data-last-width",e),Math.abs(e-o)>100&&(i&&gsap.set(i,{x:0}),t&&gsap.set(t,{x:0}),gsap.set(d,{scale:1}))};t.removeEventListener("mousedown",_),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y),t.removeEventListener("touchstart",_),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",y),document.removeEventListener("wheel",w),window.removeEventListener("resize",b);const S=_.bind(this),x=v.bind(this),E=y.bind(this),A=w.bind(this),T=b.bind(this);t.addEventListener("mousedown",S),document.addEventListener("mousemove",x),document.addEventListener("mouseup",E),document.addEventListener("wheel",A,{passive:!1}),t.addEventListener("touchstart",S,{passive:!1}),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",E),window.addEventListener("resize",T),this._galleryHandlers=this._galleryHandlers||[],this._galleryHandlers.push({element:t,type:"mousedown",handler:S},{element:document,type:"mousemove",handler:x},{element:document,type:"mouseup",handler:E},{element:document,type:"wheel",handler:A},{element:t,type:"touchstart",handler:S},{element:document,type:"touchmove",handler:x},{element:document,type:"touchend",handler:E},{element:window,type:"resize",handler:T}),a()}),200)},initScrollToRevealCTA:function(){const e=document.querySelector(".event_layout-cta");/Safari/.test(navigator.userAgent)&&/Chrome|Chromium|Android/.test(navigator.userAgent);if(!e||e.classList.contains("w-condition-invisible")||"none"===e.style.display||"none"===getComputedStyle(e).display)return;const t=document.querySelector(".event_layout-cta-sticky"),i=t?.querySelector(".event-text"),o=t?.querySelector(".btn");if(!t||!i||!o)return;if("undefined"==typeof ScrollTrigger){if("undefined"==typeof gsap)return;gsap.registerPlugin(ScrollTrigger)}this.cleanupScrollToRevealCTA();const n=i.textContent;if(i.querySelector(".event-text-fg")){const e=i.querySelector(".event-text-fg");e.style.clipPath="inset(0 100% 0 0)",e.style.webkitClipPath="inset(0 100% 0 0)"}else{i.innerHTML="";const e=document.createElement("span");e.textContent=n,e.classList.add("event-text-bg");const t=document.createElement("span");t.textContent=n,t.classList.add("event-text-fg"),t.style.clipPath="inset(0 100% 0 0)",t.style.webkitClipPath="inset(0 100% 0 0)",i.append(e,t)}gsap.set([t,i,o],{clearProps:"all"}),[e,t].forEach((e=>{e.style.opacity="1",e.style.visibility="visible"}));let r=!1;const s=ScrollTrigger.create({id:"event-cta-scroll-trigger",trigger:e,start:"top top",end:"bottom bottom",scrub:!0,markers:!1,onEnter:()=>{[e,t].forEach((e=>{e.style.opacity="1",e.style.visibility="visible"}))},onUpdate:e=>{const t=Math.min(100,100*e.progress),n=i.querySelector(".event-text-fg");n&&(n.style.clipPath=`inset(0 ${100-t}% 0 0)`,n.style.webkitClipPath=`inset(0 ${100-t}% 0 0)`),gsap.set(o,{scale:1+.05*e.progress}),e.progress>=.98&&!r?(r=!0,window.lenisInstance?.stop(),gsap.to(o,{scale:1.1,backgroundColor:"rgba(255,255,255,1)",color:"#000",duration:.3,onComplete:()=>setTimeout((()=>o.click()),0)})):e.progress<.9&&(r=!1)},onLeaveBack:()=>{const e=i.querySelector(".event-text-fg");e&&(e.style.clipPath="inset(0 100% 0 0)",e.style.webkitClipPath="inset(0 100% 0 0)"),gsap.set(o,{scale:1})},onLeave:()=>{r||(r=!0,window.lenisInstance?.stop(),gsap.to(o,{scale:1.1,backgroundColor:"rgba(255,255,255,1)",color:"#000",duration:.3,onComplete:()=>setTimeout((()=>o.click()),300)}))}});this._scrollTriggers=this._scrollTriggers||[],this._scrollTriggers.push(s),this._ctaScrollTrigger=s},cleanupScrollToRevealCTA:function(){const e=ScrollTrigger.getById("event-cta-scroll-trigger");e&&e.kill(),this._ctaScrollTrigger&&(this._ctaScrollTrigger.kill(),this._ctaScrollTrigger=null);const t=document.querySelector(".event_layout-cta"),i=document.querySelector(".event_layout-cta-sticky");(t||i)&&ScrollTrigger.getAll().forEach((e=>{e.vars.trigger!==t&&e.vars.trigger!==i||e.kill()}))},initDataWrapFadeOut:function(){const e=document.querySelector(".event_layout-grid");let t=document.querySelector(".event_date-wrap")||document.querySelector(".event-date-wrap");if(!t&&e&&(t=e.querySelector('[class*="date-wrap"]')),!e||!t)return;"undefined"==typeof ScrollTrigger&&"undefined"!=typeof gsap&&gsap.registerPlugin(ScrollTrigger);const i=ScrollTrigger.create({trigger:e,start:"60% top",end:"85% top",scrub:!0,onUpdate:e=>{const i=1-e.progress,o=5*e.progress;gsap.set(t,{opacity:i,filter:`blur(${o}px)`})}});this._scrollTriggers.push(i)}};