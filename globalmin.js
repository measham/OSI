function initSoundSystem(){var e=null!==localStorage.getItem("soundEnabled")&&"true"===localStorage.getItem("soundEnabled");Howler.mute(!e),updateSoundControl(),updateSoundWaveState(),e&&!window.music.playing()&&window.music.play()}function updateSoundControl(){var e=document.querySelector('[data-sound="text"]');if(e){var t="true"===localStorage.getItem("soundEnabled");e.textContent=t?"ON":"OFF"}}function updateSoundWaveState(){var e="true"===localStorage.getItem("soundEnabled"),t=document.querySelector("#soundWave");t&&(e?t.classList.remove("paused"):t.classList.add("paused"))}function setupGlobalEventListeners(){window.globalEventsInitialized||($(document).on("mouseenter","a, [data-noise='link']",(function(){window.hoverSound.play()})),$(document).on("click","a, [data-sound='link']",(function(e){window.clickSound.play()})),document.body.addEventListener("click",(function(e){if(e.target.closest('[data-sound="control"]')){var t="true"===localStorage.getItem("soundEnabled");t=!t,localStorage.setItem("soundEnabled",t),Howler.mute(!t),updateSoundControl(),t&&!window.music.playing()&&window.music.play(),updateSoundWaveState()}})),window.globalEventsInitialized=!0)}function initButtonAnimation(e){const t=e.querySelectorAll('.pill-link:not([data-animation-initialized="true"]), .btn:not([data-animation-initialized="true"])');if(!t.length)return;const n=window.innerWidth>991;t.forEach((e=>{if("true"===e.getAttribute("data-animation-initialized"))return;e.setAttribute("data-animation-initialized","true");let t=[];if(e.classList.contains("btn"))t=e.querySelectorAll('[data-split="chars"] .single-letter');else{const n=e.querySelector(".pill-text");if(n&&(t=n.querySelectorAll(".single-letter")),0===t.length){const n=['[data-split="chars"] .single-line .single-word .single-letter','[data-split="chars"] .single-letter',".single-letter"];for(const i of n){const n=e.querySelectorAll(i);if(n.length>0){t=n;break}}}}const i=gsap.timeline({paused:!0});i.to(e,{scale:1.05,duration:.4,ease:"back.out(1.7)"});const o=e.querySelector(".pill-circle");let a,l,s=null;if(o){a=o.querySelector(".pill-circle-wrap");const t=o.querySelectorAll(".pill-circle-wrap-clone"),n=e.hasAttribute("data-back")&&"true"===e.getAttribute("data-back")||e.hasAttribute("data-storia")&&"back"===e.getAttribute("data-storia");0===t.length&&a?(l=a.cloneNode(!0),l.classList.add("pill-circle-wrap-clone"),o.appendChild(l),gsap.set(a,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",xPercent:0}),n?gsap.set(l,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",xPercent:100}):gsap.set(l,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",xPercent:-100})):t.length>0&&(l=t[0],n&&gsap.set(l,{xPercent:100})),a&&l&&(s=gsap.timeline({paused:!0,defaults:{duration:.4,ease:"power2.out"}}),n?s.to(a,{xPercent:-100},0).to(l,{xPercent:0},0):s.to(a,{xPercent:100},0).to(l,{xPercent:0},0))}let d=null;t.length>0&&(gsap.set(t,{opacity:1}),d=gsap.timeline({paused:!0}),d.to(t,{opacity:.4,duration:.3,stagger:{each:.015,from:"start"}}).to(t,{opacity:1,duration:.3,stagger:{each:.015,from:"start"}},.1));const r=e._mouseenterHandler,u=e._mouseleaveHandler,c=e._mousemoveHandler;r&&e.removeEventListener("mouseenter",r),u&&e.removeEventListener("mouseleave",u),c&&e.removeEventListener("mousemove",c);let p=!1;e._mouseenterHandler=function(){d&&d.restart(),i.play(),s&&s.play(),n&&(p=!0)},e._mouseleaveHandler=function(){i.reverse(),s&&s.reverse(),p=!1,n&&gsap.to(e,{x:0,y:0,duration:.3,ease:"power3.out"})},n&&(e._mousemoveHandler=function(t){if(!p)return;const n=e.getBoundingClientRect(),i=n.left+n.width/2,o=n.top+n.height/2,a=.15*(t.clientX-i),l=.15*(t.clientY-o);gsap.to(e,{x:a,y:l,duration:.3,ease:"power3.out"})},e.addEventListener("mousemove",e._mousemoveHandler)),e.addEventListener("mouseenter",e._mouseenterHandler),e.addEventListener("mouseleave",e._mouseleaveHandler)})),window._buttonResizeListenerAdded||(window.addEventListener("resize",(function(){if(window.innerWidth>991!==n){document.querySelectorAll(".pill-link, .btn").forEach((e=>{e.setAttribute("data-animation-initialized","false")})),initButtonAnimation(document)}})),window._buttonResizeListenerAdded=!0)}function initBackNavigation(){document.body.removeEventListener("click",onBackClick),document.body.addEventListener("click",onBackClick)}function onBackClick(e){if(!e.target.closest('[data-back="true"]'))return;e.preventDefault();const{previous:t}=barba.history;t&&t.url?barba.go(t.url):barba.go("/")}function initSplit(e){let t=(e=e||document).querySelectorAll('[data-split="lines"]:not([data-split-initialized="true"])'),n=e.querySelectorAll('[data-split="chars"]:not([data-split-initialized="true"])'),i=e.querySelectorAll('[data-split="heading"]:not([data-split-initialized="true"])'),o=null,a=[];function l(){if(t.length>0&&(o=new SplitText(t,{type:"lines",linesClass:"single-line"}),o.lines.forEach((e=>{let t=document.createElement("div");t.classList.add("single-line-wrap"),e.parentNode.insertBefore(t,e),t.appendChild(e)})),t.forEach((e=>{e.setAttribute("data-split-initialized","true")}))),n.length>0){Array.from(n).map((e=>new SplitText(e,{type:"lines",linesClass:"single-line"}))).forEach((e=>{e.lines&&e.lines.length>0&&e.lines.forEach((e=>{let t=document.createElement("div");t.classList.add("single-line-wrap"),e.parentNode.insertBefore(t,e),t.appendChild(e)}))}));const t=e.querySelectorAll('[data-split="chars"]:not([data-split-initialized="true"]) .single-line');t.length>0&&(a=new SplitText(t,{type:"words",wordsClass:"single-word"}),a.words&&a.words.length>0&&new SplitText(a.words,{type:"chars",charsClass:"single-letter"})),n.forEach((e=>{e.setAttribute("data-split-initialized","true")}))}i.length>0&&i.forEach((e=>{new SplitText(e,{type:"lines",linesClass:"single-line"}).lines.forEach((e=>{let t=document.createElement("div");t.classList.add("single-line-wrap"),e.parentNode.insertBefore(t,e),t.appendChild(e);const n=new SplitText(e,{type:"words",wordsClass:"single-word"});n.words&&n.words.length>0&&new SplitText(n.words,{type:"chars",charsClass:"single-letter"})})),e.setAttribute("data-split-initialized","true")}))}document.fonts&&document.fonts.ready?document.fonts.ready.then((()=>{setTimeout(l,2e3)})):setTimeout(l,1500)}document.addEventListener("DOMContentLoaded",(function(){initSoundSystem(),UnicornStudio.init(),initSplit(document),setTimeout((()=>{initButtonAnimation(document)}),100),setupGlobalEventListeners()})),window.music=window.music||new Howl({src:["https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/background-noise.mp3?v=1740262752041"],loop:!0,volume:.7}),window.clickSound=window.clickSound||new Howl({src:["https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/v3click.mp3?v=1740317412253"],volume:1}),window.hoverSound=window.hoverSound||new Howl({src:["https://cdn.glitch.global/6ac96340-b172-4963-9101-6b4a9bdbb29a/swipe.mp3?v=1740263214499"],volume:1}),window.musicUnlockSet||(window.music.once("unlock",(function(){window.music.play()})),window.musicUnlockSet=!0),window.audioManager={backgroundMusicWasPlaying:!1,soundWasEnabled:!1,pauseBackgroundMusic:function(){if(void 0!==window.music&&window.music.playing()&&(this.backgroundMusicWasPlaying=!0,this.soundWasEnabled="true"===localStorage.getItem("soundEnabled"),this.soundWasEnabled)){const e=document.querySelector('[data-sound="control"]');if(e){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}else localStorage.setItem("soundEnabled","false"),Howler.mute(!0),updateSoundControl(),updateSoundWaveState()}},resumeBackgroundMusic:function(){if(void 0!==window.music&&this.backgroundMusicWasPlaying&&this.soundWasEnabled&&"true"!==localStorage.getItem("soundEnabled")){const e=document.querySelector('[data-sound="control"]');if(e){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}else localStorage.setItem("soundEnabled","true"),Howler.mute(!1),window.music.play(),updateSoundControl(),updateSoundWaveState();this.backgroundMusicWasPlaying=!1}},registerMediaElement:function(e,t){e&&("youtube"===t?e.addEventListener("click",(()=>{this.pauseBackgroundMusic()})):"audio"===t&&(e.addEventListener("play",(()=>{this.pauseBackgroundMusic()})),e.addEventListener("pause",(()=>{e.ended||this.resumeBackgroundMusic()})),e.addEventListener("ended",(()=>{this.resumeBackgroundMusic()}))))}},gsap.registerPlugin(SplitText),window.initSoundSystem=initSoundSystem,window.updateSoundControl=updateSoundControl,window.updateSoundWaveState=updateSoundWaveState,window.initButtonAnimation=initButtonAnimation,window.audioManager=window.audioManager,window.initBackNavigation=initBackNavigation,window.initSplit=initSplit;