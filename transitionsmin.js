document.addEventListener("DOMContentLoaded",(function(){const e={},t=window.matchMedia("(min-width: 992px)").matches,n=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t);function o(e){const t=document.querySelector(".toolbar");t&&(t.classList.remove("cc-home","cc-temi","cc-storia","cc-list","cc-event"),e&&t.classList.add(`cc-${e}`))}function a(){window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,n&&window.lenisInstance&&window.lenisInstance.scrollTo(0,{immediate:!0})}if(n&&!window.lenisRafStarted){const e=new Lenis({duration:1.6,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),smoothWheel:!0,wheelMultiplier:.8,touchMultiplier:1.5,infinite:!1,orientation:"vertical",gestureOrientation:"vertical",smoothTouch:!0,lerp:.1});requestAnimationFrame((function t(n){e.raf(n),requestAnimationFrame(t)})),window.lenisRafStarted=!0,window.lenisInstance=e}barba.hooks.before((()=>{ScrollTrigger.getAll().forEach((e=>e.kill())),EventPage&&"function"==typeof EventPage.cleanupScrollToRevealCTA&&EventPage.cleanupScrollToRevealCTA(),n&&window.lenisInstance&&window.lenisInstance.stop()})),barba.hooks.beforeEnter((e=>{e.next.container.classList.add("fixed"),window.initSplit&&window.initSplit(e.next.container),setTimeout((()=>{window.initButtonAnimation&&window.initButtonAnimation(e.next.container)}),0),a()})),barba.hooks.after((e=>{e&&e.next&&e.next.container&&e.next.container.classList.remove("fixed"),ScrollTrigger.refresh(),n&&window.lenisInstance&&!window.lenisInstance.isScrolling&&window.lenisInstance.start()})),barba.init({preventRunning:!0,prevent:({el:e})=>!1,transitions:[{name:"once-transition",once(e){const t=gsap.timeline();if(gsap.set(e.next.container,{opacity:0,scale:1.1,transformOrigin:"center center"}),t.to(e.next.container,{opacity:1,scale:1,duration:.6,ease:"power2.out"}),"home"===e.next.namespace){const n=e.next.container.querySelector(".home-bg_text-top"),o=e.next.container.querySelector(".home-bg_text-btm"),a=e.next.container.querySelectorAll(".button-group.cc-home .button.cc-home");n&&gsap.set(n,{y:-100,scale:.97,opacity:0}),o&&gsap.set(o,{y:100,scale:.97,opacity:0}),a.length&&gsap.set(a,{y:50,scale:.9,opacity:0}),n&&t.to(n,{y:0,scale:1,opacity:1,duration:1.2,ease:"power3.out"},.1),o&&t.to(o,{y:0,scale:1,opacity:1,duration:1.2,ease:"power3.out"},.3),a.length&&t.to(a,{scale:1,y:0,opacity:1,duration:.8,stagger:.1,ease:"power2.out"},.5)}return t.eventCallback("onComplete",(()=>{e.next.container.classList.remove("fixed"),n&&window.lenisInstance&&window.lenisInstance.start()}))}},{name:"event-page-transition",from:({namespace:e})=>"event"===e&&"storia"!==e,to:({namespace:e})=>"event"===e&&"storia"!==e,beforeLeave(e){"event"===e.current.namespace&&EventPage&&"function"==typeof EventPage.cleanup&&EventPage.cleanup()},leave:e=>gsap.to(e.current.container,{opacity:0,duration:.6,ease:"power1.in"}),beforeEnter(e){a(),gsap.set(e.next.container,{opacity:0})},enter(e){const t=gsap.timeline();return t.to(e.next.container,{opacity:1,duration:.6,ease:"power2.out"}),t.eventCallback("onComplete",(()=>{gsap.set(e.next.container,{clearProps:"transform"}),ScrollTrigger.refresh(),n&&window.lenisInstance&&window.lenisInstance.start()}))}},{name:"storia-to-event-transition",from:{namespace:"storia"},to:{namespace:"event"},sync:!0,beforeLeave(e){StoriaPage&&"function"==typeof StoriaPage.cleanup&&StoriaPage.cleanup()},leave(e){const t=gsap.timeline(),n=e.current.container.querySelector(".circle_wrapper");return n&&t.to(n,{opacity:0,duration:.6,ease:"power1.out"},0),t.to(e.current.container,{opacity:0,duration:.6,ease:"power1.in"},.3),t},beforeEnter(e){e.next.container.querySelector(".event-circle_bg");gsap.set(e.next.container,{opacity:0});const t={leftCol:e.next.container.querySelector(".event_left-col"),rightCol:e.next.container.querySelector(".event_right-col"),categoryNav:e.next.container.querySelector(".category-nav"),dateWrap:e.next.container.querySelector(".event_date-wrap")};t.leftCol&&gsap.set(t.leftCol,{y:100,opacity:0}),t.rightCol&&gsap.set(t.rightCol,{y:100,opacity:0}),t.categoryNav&&gsap.set(t.categoryNav,{opacity:0}),t.dateWrap&&gsap.set(t.dateWrap,{opacity:0})},enter(o){const a=gsap.timeline(),i={leftCol:o.next.container.querySelector(".event_left-col"),rightCol:o.next.container.querySelector(".event_right-col"),categoryNav:o.next.container.querySelector(".category-nav"),dateWrap:o.next.container.querySelector(".event_date-wrap")};return t&&e.gradientContainer&&a.to(e.gradientContainer,{top:"-50%",duration:1,ease:"power3.inOut"},.2),a.to(o.next.container,{opacity:1,duration:.8,ease:"power2.out"},0),i.categoryNav&&a.to(i.categoryNav,{opacity:1,duration:.6,ease:"power2.out"},.2),i.dateWrap&&a.to(i.dateWrap,{opacity:1,duration:.6,ease:"power2.out"},.3),i.leftCol&&a.to(i.leftCol,{y:0,opacity:1,duration:1,ease:"power2.out"},.6),i.rightCol&&a.to(i.rightCol,{y:0,opacity:1,duration:1,ease:"power2.out"},.8),a.eventCallback("onComplete",(()=>{n&&window.lenisInstance&&window.lenisInstance.start()}))}},{name:"fade-transition",to:{namespace:["home","temi","storia","list","event"]},leave(e){const t=e.current.container,n=window.innerWidth/2,o=window.innerHeight/2,a=n+window.pageXOffset,i=o+(window.lenisInstance?.scroll||window.pageYOffset);gsap.set(t,{transformOrigin:`${a}px ${i}px`});const r=gsap.timeline();if("home"===e.current.namespace){const e=t.querySelector(".home-bg_text-top"),n=t.querySelector(".home-bg_text-btm"),o=t.querySelectorAll(".button-group.cc-home .button.cc-home");o.length&&r.to(o,{y:50,opacity:0,duration:.4,stagger:{amount:.05,from:"end"},ease:"power1.in"},0),n&&r.to(n,{y:50,opacity:0,duration:.5,ease:"power1.in"},.1),e&&r.to(e,{y:-50,opacity:0,duration:.5,ease:"power1.in"},.2)}return r.to(t,{opacity:0,scale:.95,duration:.6,ease:"power1.in"},"home"===e.current.namespace?.3:0),r},beforeEnter(e){gsap.set(e.next.container,{opacity:0,scale:1.05,transformOrigin:"center center",position:"fixed",width:"100%",height:"100%",top:0,left:0})},enter(e){const t=gsap.timeline();if(t.to(e.next.container,{opacity:1,scale:1,duration:.6,ease:"power2.out",delay:.25}),"home"===e.next.namespace){const n=e.next.container.querySelector(".home-bg_text-top"),o=e.next.container.querySelector(".home-bg_text-btm"),a=e.next.container.querySelectorAll(".button-group.cc-home .button.cc-home");n&&t.to(n,{y:0,scale:1,opacity:1,duration:1.2,ease:"power3.out"},.1),o&&t.to(o,{y:0,scale:1,opacity:1,duration:1.2,ease:"power3.out"},.3),a.length&&t.to(a,{scale:1,y:0,opacity:1,duration:.8,stagger:.1,ease:"power2.out"},.5)}return t.eventCallback("onComplete",(()=>{gsap.set(e.next.container,{position:"relative",width:"auto",height:"auto"}),n&&window.lenisInstance&&window.lenisInstance.start()}))}},{name:"list-to-event-transition",from:{namespace:"list"},to:{namespace:"event"},sync:!1,leave(e){const t=gsap.timeline(),n=e.current.container,o=window.innerWidth/2,a=window.innerHeight/2,i=o+window.pageXOffset,r=a+window.pageYOffset;return gsap.set(n,{transformOrigin:`${i}px ${r}px`}),t.to(n,{opacity:0,scale:.95,duration:.6,ease:"power1.in"}),t},beforeEnter(e){const t=e.next.container.querySelector(".event-circle_bg");gsap.set(e.next.container,{opacity:0,scale:1.05,transformOrigin:"center center",position:"fixed",width:"100%",height:"100%",top:0,left:0}),t&&gsap.set(t,{clipPath:"inset(0 100% 0 0)"})},enter(e){const t=gsap.timeline(),o=e.next.container.querySelector(".event-circle_bg");return t.to(e.next.container,{opacity:1,scale:1,duration:.6,ease:"power2.out"},.25),o&&t.to(o,{clipPath:"inset(0 0% 0 0)",duration:1,ease:"power2.inOut"},.2),t.eventCallback("onComplete",(()=>{gsap.set(e.next.container,{position:"relative",width:"auto",height:"auto"}),n&&window.lenisInstance&&window.lenisInstance.start()}))}}],views:[{namespace:"home",beforeEnter(e){HomePage.init(e.next.container)},beforeLeave(e){HomePage&&"function"==typeof HomePage.cleanup&&HomePage.cleanup()}},{namespace:"temi",beforeEnter(e){TemiPage.init(e.next.container)},beforeLeave(e){TemiPage&&"function"==typeof TemiPage.cleanup&&TemiPage.cleanup()}},{namespace:"storia",beforeEnter(e){StoriaPage.init(e.next.container)},beforeLeave(e){StoriaPage&&"function"==typeof StoriaPage.cleanup&&StoriaPage.cleanup()}},{namespace:"list",beforeEnter(e){ListPage.init(e.next.container)},afterLeave(e){ListPage&&"function"==typeof ListPage.cleanup&&ListPage.cleanup()}},{namespace:"event",afterEnter(e){const t=e.next.container;EventPage.init(t),gsap.set(t,{clearProps:"transform"})},beforeLeave(e){const t=document.querySelector(".toolbar_audio");t&&gsap.to(t,{opacity:0,duration:.6,ease:"power2.in"}),ScrollTrigger.refresh(),EventPage&&"function"==typeof EventPage.cleanup&&EventPage.cleanup()}}]}),barba.hooks.beforeOnce((()=>{const e=document.querySelector('[data-barba="container"]'),t=e?.getAttribute("data-barba-namespace");document.body.classList.remove("is-loading"),t&&(document.body.setAttribute("data-barba-namespace",t),o(t))})),barba.hooks.afterOnce((()=>{const e=document.querySelector('[data-barba="container"]');e?.getAttribute("data-barba-namespace");window._barbaInitialized=!0})),barba.hooks.enter((e=>{document.body.setAttribute("data-barba-namespace",e.next.namespace),a(),initBackNavigation(),o(e.next.namespace)}))}));